/*
@preserve
Brauhaus.js Beer Calculator
Copyright 2014 Daniel G. Taylor <danielgtaylor@gmail.com>
https://github.com/homebrewing/brauhausjs
 */
var Brauhaus,tanh,hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},extend=function(t,e){function i(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},Brauhaus="undefined"!=typeof exports&&null!==exports&&exports||(this.Brauhaus={}),Brauhaus.ROOM_TEMP=23,Brauhaus.BURNER_ENERGY=9e3,Brauhaus.MASH_HEAT_LOSS=5,Brauhaus.COLOR_NAMES=[[2,"pale straw"],[3,"straw"],[4,"yellow"],[6,"gold"],[9,"amber"],[14,"deep amber"],[17,"copper"],[18,"deep copper"],[22,"brown"],[30,"dark brown"],[35,"very dark brown"],[40,"black"]],Brauhaus.RELATIVE_SUGAR_DENSITY={cornSugar:1,dme:1.62,honey:.71,sugar:.88},Brauhaus.parseDuration=function(t){var e,i,r,a,o,s,n,h,u,p,l,c;if(i=0,!isNaN(t))return t;for(c=t.match(/(\d+)\s*w/i),e=t.match(/(\d+)\s*d/i),o=t.match(/(\d+)\s*h/i),h=t.match(/(\d+)\s*m/i),p=t.match(/(\d+)\s*s/i),a=[[c,10080],[e,1440],[o,60],[h,1],[p,1/60]],s=0,n=a.length;s<n;s++)u=a[s],l=u[0],r=u[1],l&&(i+=parseInt(l[1])*r);return i},Brauhaus.displayDuration=function(t,e){var i,r,a,o,s,n,h,u,p,l;for(a=[],s=[["month",43200],["week",10080],["day",1440],["hour",60],["minute",1]],r=0,n=0,u=s.length;n<u&&(p=s[n],h=p[0],o=p[1],i=1===o||null!=e&&r===e-1?Math.round(t/o):Math.floor(t/o),t%=o,(i>0||r>0)&&r++,!(null!=e&&r>e));n++)i>0&&a.push(i+" "+h+(null!=(l=1!==i?"s":void 0)?l:""));return a.length||(a=["start"]),a.join(" ")},Brauhaus.kgToLb=function(t){return 2.20462*t},Brauhaus.lbToKg=function(t){return t/2.20462},Brauhaus.kgToLbOz=function(t){var e;return e=Brauhaus.kgToLb(t),{lb:Math.floor(e),oz:16*(e-Math.floor(e))}},Brauhaus.lbOzToKg=function(t,e){return Brauhaus.lbToKg(t+e/16)},Brauhaus.litersToGallons=function(t){return.264172*t},Brauhaus.gallonsToLiters=function(t){return t/.264172},Brauhaus.litersPerKgToQuartsPerLb=function(t){return.479305709*t},Brauhaus.quartsPerLbToLitersPerKg=function(t){return t/.479305709},Brauhaus.cToF=function(t){return 1.8*t+32},Brauhaus.fToC=function(t){return(t-32)/1.8},Brauhaus.yieldToPpg=function(t){return.46214*t},Brauhaus.ppgToYield=function(t){return 2.16385*t},Brauhaus.srmToEbc=function(t){return 1.97*t},Brauhaus.ebcToSrm=function(t){return.508*t},Brauhaus.srmToLovibond=function(t){return(t+.76)/1.3546},Brauhaus.lovibondToSrm=function(t){return 1.3546*t-.76},Brauhaus.srmToRgb=function(t){var e,i,r;return r=Math.round(Math.min(255,Math.max(0,255*Math.pow(.975,t)))),i=Math.round(Math.min(255,Math.max(0,245*Math.pow(.88,t)))),e=Math.round(Math.min(255,Math.max(0,220*Math.pow(.7,t)))),[r,i,e]},Brauhaus.srmToCss=function(t){var e,i,r,a;return a=Brauhaus.srmToRgb(t),r=a[0],i=a[1],e=a[2],"rgb("+r+", "+i+", "+e+")"},Brauhaus.srmToName=function(t){var e,i,r,a,o;for(e=Brauhaus.COLOR_NAMES[0][1],o=Brauhaus.COLOR_NAMES,r=0,a=o.length;r<a;r++)i=o[r],i[0]<=t&&(e=i[1]);return e},Brauhaus.timeToHeat=function(t,e){var i,r;return null==e&&(e=80),i=4.19*t*e,r=i/Brauhaus.BURNER_ENERGY*60},Brauhaus.OptionConstructor=function(){function t(t){var e,i,r;"string"==typeof t&&(t=JSON.parse(t)),i=Object.keys(this._paramMap);for(r in t)if(hasProp.call(t,r))if(indexOf.call(i,r)>=0){if(null===t[r])continue;t[r]instanceof Array?this[r]=function(){var i,a,o,s;for(o=t[r],s=[],i=0,a=o.length;i<a;i++)e=o[i],e instanceof this._paramMap[r]?s.push(e):s.push(new this._paramMap[r](e));return s}.call(this):t[r]instanceof this._paramMap[r]?this[r]=t[r]:this[r]=new this._paramMap[r](t[r])}else this[r]=t[r]}return t.prototype._paramMap={},t}(),Brauhaus.Ingredient=function(t){function e(t){this.name="New "+this.constructor.name,e.__super__.constructor.call(this,t)}return extend(e,t),e.prototype.nameRegex=function(t){var e,i,r,a;if(a=!1,"string"==typeof t)a=t.exec(this.name);else for(i=0,r=t.length;i<r;i++)if(e=t[i],Array.isArray(e)&&2===e.length){if(e[0].exec(this.name)){a=e[1];break}}else{if("string"!=typeof e)throw new Error("Invalid regex input!");a=e.exec(this.name)}return a},e}(Brauhaus.OptionConstructor),Brauhaus.Fermentable=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.STEEP=/biscuit|black|cara|chocolate|crystal|munich|roast|special ?b|toast|victory|vienna/i,e.BOIL=/candi|candy|dme|dry|extract|honey|lme|liquid|sugar|syrup|turbinado/i,e.prototype.weight=1,e.prototype["yield"]=75,e.prototype.color=2,e.prototype.late=!1,e.prototype.toJSON=function(){var t;return t={name:this.name,weight:this.weight,"yield":this["yield"],color:this.color,late:this.late}},e.prototype.type=function(){return this.nameRegex([[Brauhaus.Fermentable.BOIL,"extract"],[/.*/,"grain"]])},e.prototype.addition=function(){return this.nameRegex([[/mash/i,"mash"],[/steep/i,"steep"],[/boil/i,"boil"],[Brauhaus.Fermentable.BOIL,"boil"],[Brauhaus.Fermentable.STEEP,"steep"],[/.*/,"mash"]])},e.prototype.weightLb=function(){return Brauhaus.kgToLb(this.weight)},e.prototype.weightLbOz=function(){return Brauhaus.kgToLbOz(this.weight)},e.prototype.ppg=function(){return Brauhaus.yieldToPpg(this["yield"])},e.prototype.plato=function(t){return null==t&&(t=1),259-259/(1+this.gu(t)/1e3)},e.prototype.gu=function(t){return null==t&&(t=1),this.ppg()*this.weightLb()/Brauhaus.litersToGallons(t)},e.prototype.colorRgb=function(){return Brauhaus.srmToRgb(this.color)},e.prototype.colorCss=function(){return Brauhaus.srmToCss(this.color)},e.prototype.colorName=function(){return Brauhaus.srmToName(this.color)},e.prototype.price=function(){var t;return t=this.nameRegex([[/dry|dme/i,8.8],[/liquid|lme/i,6.6],[/.*/i,4.4]]),this.weight*t},e}(Brauhaus.Ingredient),Brauhaus.Spice=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.DRY_SPICE=/primary|secondary|dry/i,e.prototype.weight=.025,e.prototype.aa=0,e.prototype.use="boil",e.prototype.time=60,e.prototype.form="pellet",e.prototype.toJSON=function(){var t;return t={name:this.name,weight:this.weight,aa:this.aa,use:this.use,time:this.time,form:this.form}},e.prototype.dry=function(){return Brauhaus.Spice.DRY_SPICE.exec(this.use)||!1},e.prototype.utilizationFactor=function(){return"pellet"===this.form?1.15:1},e.prototype.bitterness=function(t,e,i){var r,a,o;if("tinseth"===t)a=1.65*Math.pow(125e-6,e-1)*((1-Math.pow(Math.E,-.04*this.time))/4.15)*(this.aa/100*this.weight*1e6/i)*this.utilizationFactor();else{if("rager"!==t)throw new Error("Unknown IBU method '"+t+"'!");o=18.11+13.86*tanh((this.time-31.32)/18.27),r=Math.max(0,(e-1.05)/.2),a=100*this.weight*o*this.utilizationFactor()*this.aa/(i*(1+r))}return a},e.prototype.weightLb=function(){return Brauhaus.kgToLb(this.weight)},e.prototype.weightLbOz=function(){return Brauhaus.kgToLbOz(this.weight)},e.prototype.price=function(){var t;return t=this.nameRegex([[/.*/i,17.64]]),this.weight*t},e}(Brauhaus.Ingredient),Brauhaus.Yeast=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.type="ale",e.prototype.form="liquid",e.prototype.attenuation=75,e.prototype.toJSON=function(){var t;return t={name:this.name,type:this.type,form:this.form,attenuation:this.attenuation}},e.prototype.price=function(){return this.nameRegex([[/wyeast|white labs|wlp/i,7],[/.*/i,3.5]])},e}(Brauhaus.Ingredient),Brauhaus.MashStep=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.types=["Infusion","Temperature","Decoction"],e.prototype.name="Saccharification",e.prototype.type="Infusion",e.prototype.waterRatio=3,e.prototype.temp=68,e.prototype.endTemp=null,e.prototype.time=60,e.prototype.rampTime=null,e.prototype.toJSON=function(){var t;return t={name:this.name,type:this.type,waterRatio:this.waterRatio,temp:this.temp,endTemp:this.endTemp,time:this.time,rampTime:this.rampTime}},e.prototype.description=function(t,e){var i,r,a,o,s,n;switch(null==t&&(t=!0),r="",t?(i="l",a="l per kg",o=this.temp+"C",n=this.waterRatio):(i="qt",a="qt per lb",o=this.tempF()+"F",n=this.waterRatioQtPerLb()),null!=e?(t||(e=Brauhaus.kgToLb(e)),s=""+(n*e).toFixed(1)+i):s=""+n.toFixed(1)+a+" of grain",this.type){case"Infusion":r="Infuse "+s+" for "+this.time+" minutes at "+o;break;case"Temperature":r="Stop heating and hold for "+this.time+" minutes at "+o;break;case"Decoction":r="Add "+s+" boiled water to reach "+o+" and hold for "+this.time+" minutes";break;default:r="Unknown mash step type '"+this.type+"'!"}return r},e.prototype.waterRatioQtPerLb=function(){return Brauhaus.litersPerKgToQuartsPerLb(this.waterRatio)},e.prototype.tempF=function(){return Brauhaus.cToF(this.temp)},e.prototype.endTempF=function(){return Brauhaus.cToF(this.endTemp)},e}(Brauhaus.OptionConstructor),Brauhaus.Mash=function(t){function e(t){this.steps=[],e.__super__.constructor.call(this,t)}return extend(e,t),e.prototype._paramMap={steps:Brauhaus.MashStep},e.prototype.name="",e.prototype.grainTemp=Brauhaus.ROOM_TEMP,e.prototype.spargeTemp=76,e.prototype.ph=null,e.prototype.notes="",e.prototype.steps=null,e.prototype.toJSON=function(){var t;return t={name:this.name,grainTemp:this.grainTemp,spargeTemp:this.spargeTemp,ph:this.ph,notes:this.notes,steps:this.steps}},e.prototype.grainTempF=function(){return Brauhaus.cToF(this.grainTemp)},e.prototype.spargeTempF=function(){return Brauhaus.cToF(this.spargeTemp)},e.prototype.addStep=function(t){return this.steps.push(new Brauhaus.MashStep(t))},e}(Brauhaus.OptionConstructor),Brauhaus.Recipe=function(t){function e(t){this.fermentables=[],this.spices=[],this.yeast=[],e.__super__.constructor.call(this,t)}return extend(e,t),e.prototype.name="New Recipe",e.prototype.description="Recipe description",e.prototype.author="Anonymous Brewer",e.prototype.boilSize=10,e.prototype.batchSize=20,e.prototype.servingSize=.355,e.prototype.steepEfficiency=50,e.prototype.steepTime=20,e.prototype.mashEfficiency=75,e.prototype.style=null,e.prototype.ibuMethod="tinseth",e.prototype.fermentables=null,e.prototype.spices=null,e.prototype.yeast=null,e.prototype.mash=null,e.prototype.og=0,e.prototype.fg=0,e.prototype.color=0,e.prototype.ibu=0,e.prototype.abv=0,e.prototype.price=0,e.prototype.buToGu=0,e.prototype.bv=0,e.prototype.ogPlato=0,e.prototype.fgPlato=0,e.prototype.abw=0,e.prototype.realExtract=0,e.prototype.calories=0,e.prototype.bottlingTemp=0,e.prototype.bottlingPressure=0,e.prototype.primingCornSugar=0,e.prototype.primingSugar=0,e.prototype.primingHoney=0,e.prototype.primingDme=0,e.prototype.primaryDays=14,e.prototype.primaryTemp=20,e.prototype.secondaryDays=0,e.prototype.secondaryTemp=0,e.prototype.tertiaryDays=0,e.prototype.tertiaryTemp=0,e.prototype.agingDays=14,e.prototype.agingTemp=20,e.prototype.brewDayDuration=null,e.prototype.boilStartTime=null,e.prototype.boilEndTime=null,e.prototype.timelineMap=null,e.prototype._paramMap={fermentables:Brauhaus.Fermentable,spices:Brauhaus.Spice,yeast:Brauhaus.Yeast,mash:Brauhaus.Mash},e.prototype.toJSON=function(){var t;return t={name:this.name,description:this.description,author:this.author,boilSize:this.boilSize,batchSize:this.batchSize,servingSize:this.servingSize,steepEfficiency:this.steepEfficiency,steepTime:this.steepTime,mashEfficiency:this.mashEfficiency,style:this.style,ibuMethod:this.ibuMethod,fermentables:this.fermentables,spices:this.spices,yeast:this.yeast,mash:this.mash,bottlingTemp:this.bottlingTemp,bottlingPressure:this.bottlingPressure,primaryDays:this.primaryDays,primaryTemp:this.primaryTemp,secondaryDays:this.secondaryDays,secondaryTemp:this.secondaryTemp,tertiaryDays:this.tertiaryDays,tertiaryTemp:this.tertiaryTemp,agingDays:this.agingDays,agingTemp:this.agingTemp}},e.prototype.batchSizeGallons=function(){return Brauhaus.litersToGallons(this.batchSize)},e.prototype.boilSizeGallons=function(){return Brauhaus.litersToGallons(this.boilSize)},e.prototype.add=function(t,e){switch(t){case"fermentable":return this.fermentables.push(new Brauhaus.Fermentable(e));case"spice":case"hop":return this.spices.push(new Brauhaus.Spice(e));case"yeast":return this.yeast.push(new Brauhaus.Yeast(e))}},e.prototype.grainWeight=function(){var t,e,i,r,a;for(a=0,r=this.fermentables,e=0,i=r.length;e<i;e++)t=r[e],"grain"===t.type()&&(a+=t.weight);return a},e.prototype.bottleCount=function(){return Math.floor(this.batchSize/this.servingSize)},e.prototype.colorName=function(){return Brauhaus.srmToName(this.color)},e.prototype.scale=function(t,e){var i,r,a,o,s,n,h,u,p,l,c,m,y,f;for(a=1,l=1,c=this.fermentables,n=0,u=c.length;n<u;n++)s=c[n],o=function(){switch(s.addition()){case"steep":return this.steepEfficiency/100;case"mash":return this.mashEfficiency/100;default:return 1}}.call(this),s.late||(a+=s.gu(this.boilSize)*o/1e3),s.weight*=t/this.batchSize,s.late||(l+=s.gu(e)*o/1e3);for(m=this.spices,h=0,p=m.length;h<p;h++)if(y=m[h],y.aa&&y.time)switch(r=y.bitterness(this.ibuMethod,a,this.batchSize),this.ibuMethod){case"tinseth":y.weight=r*t/(1.65*Math.pow(125e-6,l-1)*((1-Math.pow(2.718,-.04*y.time))/4.15)*(y.aa/100*1e6)*y.utilizationFactor());break;case"rager":f=18.11+13.86*tanh((y.time-31.32)/18.27),i=Math.max(0,(l-1.05)/.2),y.weight=r/(100*f*y.utilizationFactor()*y.aa/(t*(1+i)))}else y.weight*=t/this.batchSize;return this.batchSize=t,this.boilSize=e},e.prototype.grade=function(){var t,e,i,r,a,o,s,n,h;for(e=0,""!==(o=this.name.toLowerCase())&&"new recipe"!==o&&"untitled"!==o&&(e+=1),""!==(s=this.description.toLowerCase())&&"recipe description"!==s&&(e+=1),""!==(n=this.author.toLowerCase())&&"anonymous brewer"!==n&&(e+=1),this.style&&(e+=.5),h=[this.fermentables,this.spices,this.yeast],r=0,a=h.length;r<a;r++)i=h[r],i.length&&(e+=1,t=function(t){var e;return""===(e=t.name.toLowerCase())||"new fermentable"===e||"new spice"===e||"new yeast"===e},i.filter(t).length||(e+=.5));return e},e.prototype.calculate=function(){var t,e,i,r,a,o,s,n,h,u,p,l,c,m,y,f,g,b,d,T,B,w,M,S,_;for(this.og=1,this.fg=0,this.ibu=0,this.price=0,a=1,f=0,t=0,this.timelineMap={fermentables:{mash:[],steep:[],boil:[],boilEnd:[]},times:{},drySpice:{},yeast:[]},g=this.fermentables,u=0,c=g.length;u<c;u++)switch(s=g[u],o=function(){switch(s.addition()){case"steep":return this.steepEfficiency/100;case"mash":return this.mashEfficiency/100;default:return 1}}.call(this),f+=s.color*s.weightLb()/this.batchSizeGallons(),h=s.gu(this.batchSize)*o,n=h/1e3,this.og+=n,s.late||(a+=s.gu(this.boilSize)*o/1e3),this.price+=s.price(),s.addition()){case"boil":s.late?this.timelineMap.fermentables.boilEnd.push([s,h]):this.timelineMap.fermentables.boil.push([s,h]);break;case"steep":this.timelineMap.fermentables.steep.push([s,h]);break;case"mash":this.timelineMap.fermentables.mash.push([s,h])}for(this.color=1.4922*Math.pow(f,.6859),b=this.yeast,p=0,m=b.length;p<m;p++)_=b[p],_.attenuation>t&&(t=_.attenuation),this.price+=_.price(),this.timelineMap.yeast.push(_);for(0===t&&(t=75),this.fg=this.og-(this.og-1)*t/100,this.abv=1.05*(this.og-this.fg)/this.fg/.79*100,this.ogPlato=-463.37+668.72*this.og-205.35*(this.og*this.og),this.fgPlato=-463.37+668.72*this.fg-205.35*(this.fg*this.fg),this.realExtract=.1808*this.ogPlato+.8192*this.fgPlato,this.abw=.79*this.abv/this.fg,this.calories=Math.max(0,(6.9*this.abw+4*(this.realExtract-.1))*this.fg*this.servingSize*10),S=this.bottlingPressure||2.5,w=Brauhaus.cToF(this.bottlingTemp||Brauhaus.ROOM_TEMP),this.primingCornSugar=.075975*(S-3.0378+.050062*w-26555e-8*w*w),this.primingSugar=.90995*this.primingCornSugar,this.primingHoney=1.22496*this.primingCornSugar,this.primingDme=1.33249*this.primingCornSugar,d=this.spices,l=0,y=d.length;l<y;l++)B=d[l],r=0,M=B.time,B.aa&&"boil"===B.use.toLowerCase()?this.ibu+=B.bitterness(this.ibuMethod,a,this.batchSize):B.aa&&"steep"===B.use.toLowerCase()&&(this.ibu+=B.bitterness(this.ibuMethod,this.og,this.batchSize)),this.price+=B.price(),B.dry()?(null==(e=this.timelineMap.drySpice)[M]&&(e[M]=[]),this.timelineMap.drySpice[M].push([B,r])):(null==(i=this.timelineMap.times)[M]&&(i[M]=[]),this.timelineMap.times[M].push([B,r]));return this.buToGu=this.ibu/(this.og-1)/1e3,T=1e3*(.82*(this.fg-1)+.18*(this.og-1)),this.bv=.8*this.ibu/T},e.prototype.timeline=function(t){var e,i,r,a,o,s,n,h,u,p,l,c,m,y,f,g,b,d,T,B,w,M,S,_,v,x,z,E,F,O,D,R,L,P,C,k,I,N,A,G,H,Y,U,q;if(null==t&&(t=!0),N=[],r="water",G=0,n=Brauhaus.ROOM_TEMP,T=0,u=function(e){var i,r,a,o,s,n,h,u,p;for(a=[],h=e||[],o=0,n=h.length;o<n;o++)u=h[o],i=u[0],r=u[1],t?p=i.weight.toFixed(1)+"kg":(s=i.weightLbOz(),p=parseInt(s.lb)+"lb "+parseInt(s.oz)+"oz"),a.push(p+" of "+i.name+" ("+r.toFixed(1)+" GU)");return a},v=function(e){var i,r,a,o,s,n,h,u,p;for(a=[],n=e||[],o=0,s=n.length;o<s;o++)h=n[o],u=h[0],r=h[1],p=t?parseInt(1e3*u.weight)+"g":(16*u.weightLb()).toFixed(2)+"oz",i="",r&&(i=" ("+r.toFixed(1)+" IBU)"),a.push(p+" of "+u.name+i);return a},this.timelineMap.fermentables.mash.length){for(r="wort",B=this.mash,null==B&&(B=new Brauhaus.Mash),m=u(this.timelineMap.fermentables.mash),N.push([G,"Begin "+B.name+" mash. Add "+m.join(", ")+"."]),D=(null!=(S=this.mash)?S.steps:void 0)||[new Brauhaus.MashStep({name:"Saccharification",type:"Infusion",time:60,rampTime:Brauhaus.timeToHeat(this.grainWeight(),68-n),temp:68,waterRatio:2.75})],y=0,b=D.length;y<b;y++)O=D[y],P=O.waterRatio*this.grainWeight()-T,O.temp!==n&&P>0?(R=(O.temp-n)*(.4184*this.grainWeight())/P+O.temp,I=Brauhaus.timeToHeat(P,R-n),t?(C=P.toFixed(1)+"l",L=Math.round(R)+"°C"):(C=(4*Brauhaus.litersToGallons(P)).toFixed(1)+"qts",L=Math.round(Brauhaus.cToF(R))+"°F"),N.push([G,"Heat "+C+" to "+L+" (about "+Math.round(I)+" minutes)"]),T+=P,G+=I):O.temp!==n&&(I=Brauhaus.timeToHeat(T,O.temp-n),l=t?Math.round(O.temp)+"°C":Math.round(Brauhaus.cToF(O.temp))+"°F",N.push([G,"Heat the mash to "+l+" (about "+Math.round(I)+" minutes)"]),G+=I),N.push([G,O.name+": "+O.description(t,this.grainWeight())+"."]),G+=O.time,n=O.temp-O.time*Brauhaus.MASH_HEAT_LOSS/60;N.push([G,"Remove grains from mash. This is now your wort."]),G+=5}for(this.timelineMap.fermentables.steep.length&&(r="wort",F=function(){var t,e,i,r,a;for(i=this.timelineMap.fermentables.steep,a=[],t=0,e=i.length;t<e;t++)r=i[t],h=r[0],p=r[1],a.push(h.weight);return a}.call(this).reduce(function(t,e){return t+e}),x=Brauhaus.timeToHeat(2.75*F,68-n),n=68,T+=2.75*F,t?(E=(2.75*F).toFixed(1)+"l",z="68°C"):(E=Brauhaus.litersToGallons(2.75*F).toFixed(1)+"gal",z=Brauhaus.cToF(68).toFixed(1)+"°F"),N.push([G,"Heat "+E+" to "+z+" (about "+Math.round(x)+" minutes)"]),G+=x,m=u(this.timelineMap.fermentables.steep),N.push([G,"Add "+m.join(", ")+" and steep for "+this.steepTime+" minutes."]),G+=20),Y=Math.min(1,T/this.boilSize),n=n*Y+Brauhaus.ROOM_TEMP*(1-Y),o=t?this.boilSize.toFixed(1)+"l":this.boilSizeGallons().toFixed(1)+"gal",e=this.boilSize-T<this.boilSize?"Top up the "+r+" to "+o+" and heat to a rolling boil":"Bring "+o+" to a rolling boil",a=parseInt(Brauhaus.timeToHeat(this.boilSize,100-n)),N.push([G,e+" (about "+a+" minutes)."]),G+=a,this.boilStartTime=G,A=function(){var t,e;t=this.timelineMap.times,e=[];for(g in t)hasProp.call(t,g)&&(H=t[g],e.push(parseInt(g)));return e}.call(this),this.timelineMap.fermentables.boilEnd.length&&indexOf.call(A,5)<0&&(this.timelineMap.times[5]=[],A.push(5)),w=0,_=A.sort(function(t,e){return e-t}),c=f=0,d=_.length;f<d;c=++f)k=_[c],m=v(this.timelineMap.times[k]),0===c&&(m=u(this.timelineMap.fermentables.boil).concat(m),w=k),G+=w-k,w=k,5===k&&this.timelineMap.fermentables.boilEnd.length&&(m=u(this.timelineMap.fermentables.boilEnd).concat(m)),N.push([G,"Add "+m.join(", ")]);return G+=w,this.boilEndTime=G,s=t?this.primaryTemp+"°C":Brauhaus.cToF(this.primaryTemp)+"°F",N.push([G,"Flame out. Begin chilling to "+s+" and aerate the cooled wort (about 20 minutes)."]),G+=20,q=function(){var t,e,i,r;for(i=this.yeast,r=[],t=0,e=i.length;t<e;t++)U=i[t],r.push(U.name);return r}.call(this),!q.length&&this.primaryDays&&(q=["yeast"]),q.length&&N.push([G,"Pitch "+q.join(", ")+" and seal the fermenter. You should see bubbles in the airlock within 24 hours."]),this.brewDayDuration=G,this.primaryDays||this.secondaryDays||this.tertiaryDays?(G+=1440*this.primaryDays,this.secondaryDays?(N.push([G,"Move to secondary fermenter for "+Brauhaus.displayDuration(1440*this.secondaryDays,2)+"."]),G+=1440*this.secondaryDays):this.tertiaryDays&&(N.push([G,"Move to tertiary fermenter for "+Brauhaus.displayDuration(1440*this.tertiaryDays,2)+"."]),G+=1440*this.tertiaryDays),M="Prime and bottle about "+this.bottleCount()+" bottles.",this.agingDays&&(i=t?this.agingTemp+"C":Brauhaus.cToF(this.agingTemp)+"F",M+=" Age at "+i+" for "+this.agingDays+" days."),N.push([G,M]),G+=1440*this.agingDays,N.push([G,"Relax, don't worry and have a homebrew!"]),N):(N.push([G,"Drink immediately (about "+this.bottleCount()+" bottles)."]),N)},e}(Brauhaus.OptionConstructor);